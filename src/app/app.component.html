<div class="container mt-4">
  <h1>Student Admission Form</h1>

  <form [formGroup]="studentForm" (ngSubmit)="onSubmit()">
    <div class="row">
      <div class="col-md-6">
        <div class="container mt-4">
            <div class="form-group">
              <label for="firstName">First Name</label>
              <input type="text" id="firstName" formControlName="firstName" class="form-control" required>
              <div *ngIf="studentForm.get('firstName')?.hasError('required') && studentForm.get('firstName')?.touched" class="text-danger">
                First Name is required.
              </div>
            </div>
        
            <div class="form-group">
              <label for="lastName">Last Name</label>
              <input type="text" id="lastName" formControlName="lastName" class="form-control" required>
              <div *ngIf="studentForm.get('lastName')?.hasError('required') && studentForm.get('lastName')?.touched" class="text-danger">
                Last Name is required.
              </div>
            </div>
        
            <div class="form-group">
              <label for="gender">Gender</label>
              <select id="gender" formControlName="gender" class="form-control" required>
                <div *ngIf="studentForm.get('gender')?.hasError('required') && studentForm.get('gender')?.touched" class="text-danger">
                  Gender is required.
                </div>
                <option value="male">Male</option>
                <option value="female">Female</option>
              </select>
            </div>
        
            <div class="form-group">
              <label for="previousSchool">Previous School Name</label>
              <input type="text" id="previousSchool" formControlName="previousSchool" class="form-control" required>
              <div *ngIf="studentForm.get('previousSchool')?.hasError('required') && studentForm.get('previousSchool')?.touched" class="text-danger">
                Previous School Name is required.
              </div>
            </div>
        
            <div class="form-group">
              <label for="previousClass">Previous Class</label>
              <input type="text" id="previousClass" formControlName="previousClass" class="form-control" required>
              <div *ngIf="studentForm.get('previousClass')?.hasError('required') && studentForm.get('previousClass')?.touched" class="text-danger">
                Previous Class is required.
              </div>
            </div>
        
            <div class="form-group">
              <label for="previousClassName">Previous Class Name</label>
              <input type="text" id="previousClassName" formControlName="previousClassName" class="form-control" required>
              <div *ngIf="studentForm.get('previousClassName')?.hasError('required') && studentForm.get('previousClassName')?.touched" class="text-danger">
                Previous Class Name is required.
              </div>
            </div>
        
        </div>
        
      </div>

      <div class="col-md-6">
        <div class="container mt-4">
            <div class="form-group">
              <label for="mobileNumber">Mobile Number</label>
              <input type="tel" id="mobileNumber" formControlName="mobileNumber" class="form-control" required>
              <div *ngIf="studentForm.get('mobileNumber')?.hasError('required') && studentForm.get('mobileNumber')?.touched" class="text-danger">
                Mobile Number is required.
              </div>
            </div>
        
            <div class="form-group">
              <label for="parentMobileNumber">Parent Mobile Number</label>
              <input type="tel" id="parentMobileNumber" formControlName="parentMobileNumber" class="form-control" required>
              <div *ngIf="studentForm.get('parentMobileNumber')?.hasError('required') && studentForm.get('parentMobileNumber')?.touched" class="text-danger">
                Parent Mobile Number is required.
              </div>
            </div>
        
            <div class="form-group">
              <label for="address">Address</label>
              <input type="text" id="address" formControlName="address" class="form-control" required>
              <div *ngIf="studentForm.get('address')?.hasError('required') && studentForm.get('address')?.touched" class="text-danger">
                Address is required.
              </div>
            </div>
        
            <div class="form-group">
              <label for="city">City</label>
              <input type="text" id="city" formControlName="city" class="form-control" required>
              <div *ngIf="studentForm.get('city')?.hasError('required') && studentForm.get('city')?.touched" class="text-danger">
                City is required.
              </div>
            </div>
        
            <div class="form-group">
              <label for="state">State</label>
              <input type="text" id="state" formControlName="state" class="form-control" required>
              <div *ngIf="studentForm.get('state')?.hasError('required') && studentForm.get('state')?.touched" class="text-danger">
                State is required.
              </div>
            </div>
        
            <div class="form-group">
              <label for="pincode">Pincode</label>
              <input type="text" id="pincode" formControlName="pincode" class="form-control" required>
              <div *ngIf="studentForm.get('pincode')?.hasError('required') && studentForm.get('pincode')?.touched" class="text-danger">
                Pincode is required.
              </div>
            </div>
        
            <div class="form-group">
              <label for="email">Email</label>
              <input type="email" id="email" formControlName="email" class="form-control" required>
              <div *ngIf="studentForm.get('email')?.hasError('required') && studentForm.get('email')?.touched" class="text-danger">
                Email is required.
              </div>
            </div>
        
        </div>
        
      </div>
    </div>

    <div class="container mt-4">
        <div class="form-group">
          <label for="previousGrades">Previous Grades</label>
          <input type="text" id="previousGrades" formControlName="previousGrades" class="form-control" required>
          <div *ngIf="studentForm.get('previousGrades')?.hasError('required') && studentForm.get('previousGrades')?.touched" class="text-danger">
            Previous Grades is required.
          </div>
        </div>
    
        <div class="form-group">
          <label for="favoriteSubject">Favorite Subject</label>
          <input type="text" id="favoriteSubject" formControlName="favoriteSubject" class="form-control" required>
          <div *ngIf="studentForm.get('favoriteSubject')?.hasError('required') && studentForm.get('favoriteSubject')?.touched" class="text-danger">
            Favorite Subject is required.
          </div>
        </div>
    
    </div>

    <button type="submit" class="btn btn-primary btn-lg mx-auto d-block mt-5 mb-5">Submit</button>

  </form>

  <div class="row" *ngIf="existingStudents.length!=0">
    <div class="col-md-6">
      <h3> Student's List</h3>
      <ul class="list-group">
        <li class="list-group-item active mb-2 cursor-pointer" style="cursor: pointer;" *ngFor="let student of existingStudents" (click)="onSelectStudent(student)">{{student.firstName}} {{student.lastName}}</li>
      </ul>
    </div>

    <div class="col-md-6">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">{{ selectedStudent.firstName }} {{ selectedStudent.lastName }}</h5>
          <h6 class="card-subtitle mb-2 text-muted">{{ selectedStudent.gender }}</h6>
    
          <ul class="list-group list-group-flush">
            <li class="list-group-item"><strong>Previous School:</strong> {{ selectedStudent.previousSchool }}</li>
            <li class="list-group-item"><strong>Previous Class:</strong> {{ selectedStudent.previousClass }}</li>
            <li class="list-group-item"><strong>Previous Class Name:</strong> {{ selectedStudent.previousClassName }}</li>
            <li class="list-group-item"><strong>Mobile Number:</strong> {{ selectedStudent.mobileNumber }}</li>
            <li class="list-group-item"><strong>Parent Mobile Number:</strong> {{ selectedStudent.parentMobileNumber }}</li>
            <li class="list-group-item"><strong>Address:</strong> {{ selectedStudent.address }}</li>
            <li class="list-group-item"><strong>City:</strong> {{ selectedStudent.city }}</li>
            <li class="list-group-item"><strong>State:</strong> {{ selectedStudent.state }}</li>
            <li class="list-group-item"><strong>Pincode:</strong> {{ selectedStudent.pincode }}</li>
            <li class="list-group-item"><strong>Email:</strong> {{ selectedStudent.email }}</li>
            <li class="list-group-item"><strong>Previous Grades:</strong> {{ selectedStudent.previousGrades }}</li>
            <li class="list-group-item"><strong>Favorite Subject:</strong> {{ selectedStudent.favoriteSubject }}</li>
          </ul>
        </div>
      </div>
    </div>
  </div>
  <div class="modal" [ngClass]="{'show': showErrorPopup, 'd-block': showErrorPopup}" tabindex="-1" role="dialog" aria-labelledby="errorModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="errorModalLabel">Error</h5>
          <button type="button" class="close" (click)="closePopup()" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <p>Please fill out all required fields.</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" (click)="closePopup()">Close</button>
        </div>
      </div>
    </div>
  </div>
</div>
